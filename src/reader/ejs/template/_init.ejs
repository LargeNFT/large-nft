<% 

    let hostname = it.hostname
    let baseURL = it.baseURL
    let libraryURL = it.libraryURL
    let routablePages = it.routablePages
    let base64Version = it.base64Version
    let channelId = it.channelId
%>

<% if (libraryURL) { %>

    <script type="module" id="page-scripts">

        let initLibrary = () => {
            let baseURL = '<%= baseURL %>'

            let libraryURL
            <% if (libraryURL) { %>
                libraryURL = '<%= libraryURL %>'
            <% } %>

            let hostname = '<%= hostname %>'
            let channelId = '<%= channelId %>'
            let version = atob('<%= base64Version %>').replace('"', '').replace('"', '')
        
            let routablePages = JSON.parse(`<%~ JSON.stringify(routablePages) %>`)
        
            let app = library.initLibrary(libraryURL, baseURL, hostname, version, routablePages, channelId)
        }

        initLibrary()

        
    </script>



<% } else { %>

    <script type="module" id="page-scripts">

        let init = () => {
            let baseURL = '<%= baseURL %>'
            let hostname = '<%= hostname %>'
            let channelId = '<%= channelId %>'
            let version = atob('<%= base64Version %>').replace('"', '').replace('"', '')
        
            let routablePages = JSON.parse(`<%~ JSON.stringify(routablePages) %>`)
        
            let app = reader.initReader(baseURL, hostname, version, routablePages, channelId)
        }

        init()

    
        
    </script>


<% } %>    



