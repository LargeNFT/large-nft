<!--suppress JSAnnotator -->
<template>

  <div class="page" data-name="posts">

    <div class="fab fab-extended fab-right-bottom">
      <a href="/admin/post/create">
        <i class="icon f7-icons">add</i>
        <div class="fab-text">Create Post</div>
      </a>
    </div>


    <div class="page-content infinite-scroll-content">
      <div class="block-title">Blog Posts</div>
      <div class="block">

      <div class="list media-list">
          <ul id="post-list">
          </ul>
        <div class="preloader infinite-scroll-preloader"></div>
      </div>

    </div>
  </div>

</template>





<script>

    return {
      on: {
        pageInit: async function (e, page) {
  
        },
  
        pageAfterOut: function (e, page) {
  
          // Nothing more to load, detach infinite scroll events to prevent unnecessary loadings
          window['Global'].app.infiniteScroll.destroy('.infinite-scroll-content')
  
          // Remove preloader
          this.$$('.infinite-scroll-preloader').remove()
  
        },
      },
      created: async function () {
  
        const self = this
  
        await window['Global'].loadComponentState(this, false)
    
        let controller = window['adminPostController']
  
        // Attach 'infinite' event handler
        this.$$('.infinite-scroll-content').on('infinite', async function () {
          await controller.infiniteScrollListener()
        });
  
        //Get the page
        this.$$('.infinite-scroll-content').trigger('infinite')
  
      }
    }
  
  </script>