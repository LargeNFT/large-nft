<template>

    <div class="page" data-name="home">
  
      <div class="page-content infinite-scroll-content">
  
        <div class="row">
          <div class="post-area col-100 large-50 center">
  
            <div class="top row">
              <div class="col-10">
                <div class="profile-pic">

                  ${profilePicSrc ? $h` 
                      <img class="profile-pic-thumb" src="${profilePicSrc}">
                  ` : $h`
                      <i class="f7-icons profile-pic-thumb">person</i>
                  `}
                </div>
              </div>
              <div class="col-90">
                <div class="editor" id="create-post-textarea-home"></div>

              </div>


            </div>
  
            <div class="bottom row">
  
              <button class="col-10 button button-small bold-button"><i class="material-icons">format_bold</i></button>
              <button class="col-10 button button-small italic-button"><i class="material-icons">format_italic</i></button>
              <button class="col-10 button button-small link-button"><i class="material-icons">link</i></button>
              <button class="col-10 button button-small blockquote-button"><i class="material-icons">format_quote</i></button>
  
              <button class="col-10 button button-small image-button"><i class="material-icons">image</i></button>
              <label><input type="file" class="image-button-input" id="create-image-button-input" /></label>
  
              <button class="col-10 button button-small video-button"><i class="material-icons">videocam</i></button>
              <label><input type="file" class="video-button-input" id="create-video-button-input" /></label>
              <span class="col-20"></span>
              <button class="col-20 button button-fill button-round button-small send-post" href="#">Post</a>
            </div>
  
          </div>
        </div>
  
        <div class="row">
  
          <div class="col-100 tablet-50 center">
  
            <div class="list media-list">
              <ul id="post-list">
              </ul>
            </div>
  
            <!-- <div class="preloader infinite-scroll-preloader"></div> -->
  
          </div>
  
        </div>
  
      </div>
  
  
  
  
  
    </div>
  
  </template>
  
  
  <script>
  
    import { ContainerService } from "../../service/container-service"
    import { QuillService } from "../../service/quill-service"

    export default (props, { $on, $f7, $update }) => {
       
        let profilePicSrc = ""

        $on('pageAfterOut', (e, page) => {
            //  // Nothing more to load, detach infinite scroll events to prevent unnecessary loadings
            //  window['Global'].app.infiniteScroll.destroy('.infinite-scroll-content')
  
            //  // Remove preloader
            //  this.$$('.infinite-scroll-preloader').remove()
        })

        $on('pageInit', async (e, page) => {
            let quillService = ContainerService.getInstance(QuillService)
            await quillService.buildQuillPostEditor(`#create-post-textarea-home`)
        })
  


  
        // let controller = window['homeController']


        // $on('pageAfterOut', (e, page) => {
        //     //  // Nothing more to load, detach infinite scroll events to prevent unnecessary loadings
        //     //  window['Global'].app.infiniteScroll.destroy('.infinite-scroll-content')
  
        //     //  // Remove preloader
        //     //  this.$$('.infinite-scroll-preloader').remove()
        // })


        // // Attach 'infinite' event handler
        // $$('.infinite-scroll-content').on('infinite', async function () {
        //     await controller.infiniteScrollListener()
        // });

        // //Get the page
        // $$('.infinite-scroll-content').trigger('infinite')

        // $$('.send-post').on('click', function (e) {
        //     e.preventDefault()
        //     controller.postMessage(e, self)
        // })


      return $render
    }
  </script>
  