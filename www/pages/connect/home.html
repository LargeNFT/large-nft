<!--suppress JSAnnotator -->
<template>

  <div class="page" data-name="connect">

    <div class="page-content">

      <div class="row">
        <div class="col-100 tablet-50 center">

          <div class="block-title">IPFS Peers</div>
          <div class="block">

            <div class="list media-list peer-list">
              <ul>
                {{#each peers}}
                <li>
                  <div class="item-content">
                    <div class="item-inner">
                      <div class="item-subtitle no-wrap">
                        {{this}}
                      </div>
                    </div>
                  </div>
                </li>
                {{/each}}
              </ul>
            </div>

          </div>

          <div class="block-title">Monitored Feeds</div>
          <div class="block">

            <div class="list media-list peer-list">
              <ul>
                {{#each subscribed}}
                <li>
                  <div class="item-content">
                    <div class="item-inner">
                      <div class="item-subtitle no-wrap">
                        {{this}}
                      </div>
                    </div>
                  </div>
                </li>
                {{/each}}
              </ul>
            </div>

          </div>




          {{#if schema}}
            <div class="block-title">Schema</div>
            <div class="list">
              <ul>
                {{#each stores}}
                <li>
                  <div class="item-content">
                    <div class="item-inner">
                      <div class="item-title">
                        <!-- Item header, must be first child of item-title -->
                        <div class="item-header">{{name}}</div>

                        <div class="row">
                          <span class="wrap col-90">{{address}}</span>
                          <button class="col-10 button button-fill button-round {{type}}" data-id="{{address}}">Drop</button>
                        </div>

                      </div>
                    </div>
                  </div>
                </li>
                {{/each}}

              </ul>
            </div>
          {{else}}
            <div class="block-title">Schema Not Loaded</div>
          {{/if}}




        </div>
      </div>

    </div>

  </div>

</template>






<script>
  return {
    on: {
      pageInit: async function (e, page) {

        await window['Global'].loadComponentState(this)

        let controller = window['connectController']

        this.$$(document).on('click', '.drop-store', function(e) {
          controller.dropStoreClicked(e)
        })

      }
    }
  }
</script>