<template>

    <div class="page" data-name="admin-settings">

        <div class="navbar">
            <div class="navbar-bg"></div>
            <div class="navbar-inner">
                <div class="left">
                    <a href="#" class="link back"><i class="icon icon-back"></i></a>
                </div>
                <div class="title">Site Settings</div>
                <div class="right">
                    {{> "mobileBars"}}
                </div>
            </div>
        </div>


        <div class="page-content">
            <form class="block list" id="edit-settings-form">
                <ul>
                    <li>
                        <div class="item-content item-input">
                            <div class="item-inner">
                                <div class="item-title item-label">Site Title</div>
                                <div class="item-input-wrap">
                                    <input type="text" name="title" placeholder="Site title" value="{{settings.title}}">
                                </div>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="item-content item-input">
                            <div class="item-inner">
                                <div class="item-title item-label">Tagline</div>
                                <div class="item-input-wrap">
                                    <input type="text" name="tagline" placeholder="Enter a tagline (optional)"
                                        value="{{settings.tagline}}" />
                                </div>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="item-content item-input">
                            <div class="item-inner">
                                <div class="item-title item-label">Public Email Address (optional)</div>
                                <div class="item-input-wrap">
                                    <input type="text" name="publicEmailAddress"
                                        placeholder="Enter an option public email address"
                                        value="{{settings.publicEmailAddress}}" />
                                </div>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="item-content item-input">
                            <div class="item-inner">
                                <div class="item-title item-label">Timezone</div>
                                <div class="item-input-wrap">
                                    <select name="timezone">
                                        <option value="UTC">UTC</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </li>

                </ul>

            </form>

            <div class="block block-strong inset row">
                <div class="col-66"></div>
                <div class="col-33">
                    <button class="button button-fill save-settings-submit text-color-black">Save Settings</button>
                </div>
            </div>



            {{#if schema}}
            <div class="block-title">Schema</div>
            <div class="block">
                <div class="list">
                    <ul>
                        {{#each stores}}
                        <li>
                            <div class="item-content">
                                <div class="item-inner">
                                    <div class="item-title">
                                        <!-- Item header, must be first child of item-title -->
                                        <div class="item-header">{{name}}</div>

                                        <div class="row">
                                            <span class="wrap col-90">{{address}}</span>
                                            <button
                                                class="col-10 button button-fill button-round {{type}} text-color-black"
                                                data-id="{{address}}">Drop</button>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </li>
                        {{/each}}

                    </ul>
                </div>
            </div>

            {{else}}
            <div class="block-title">Schema Not Loaded</div>
            {{/if}}



        </div>



    </div>

</template>




<script>

    return {
        on: {
            pageInit: async function (e, page) {
                const self = this

                this.$$(document).on('click', '.drop-store', function (e) {
                    window['adminSettingsController'].dropStoreClicked(e)
                })

                this.$$('.save-settings-submit').on('click', function (e) {
                    e.preventDefault()
                    window['adminSettingsController'].settingsSave(e)
                })
            }
        }
    }

</script>